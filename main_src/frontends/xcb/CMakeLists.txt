if (X11_FOUND AND X11_xcb_FOUND AND X11_xcb_icccm_FOUND)
    if (MODULE_XCB)
        add_library(arfminesweeper-xcb MODULE "xcb.c" "xcbutil.c")
        target_compile_definitions(arfminesweeper-xcb PUBLIC _MODULE_)
        target_link_libraries(arfminesweeper-xcb X11::xcb X11::xcb_icccm)
        add_custom_target(symlink_arfminesweeper-xcb ALL
            COMMAND ln -fs "${CMAKE_CURRENT_BINARY_DIR}/*.so" ${MODULE_DIR}
            DEPENDS arfminesweeper-xcb module_dir)
        message(STATUS "Building with module xcb")
    else()
        message(STATUS "Not building with module xcb")
    endif()

    if (STATIC_XCB)
        target_sources(arfminesweeper PRIVATE "xcb.c" "xcbutil.c")
        target_link_libraries(arfminesweeper X11::xcb X11::xcb_icccm)
        target_compile_definitions(arfminesweeper PUBLIC FRONTEND_XCB)
        message(STATUS "Building with static xcb")
    else()
        message(STATUS "Not building with static xcb")
    endif()
else()
    message(STATUS "No XCB found")
endif()

